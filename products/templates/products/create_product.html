{% extends 'products/base.html' %}

{% block title %}Crear Producto - Platzi Store{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header text-center" style="background: linear-gradient(45deg, var(--primary-color), var(--accent-color)); color: white; border-radius: 20px 20px 0 0;">
                    <h3><i class="fas fa-plus-circle"></i> Crear Nuevo Producto</h3>
                </div>
                <div class="card-body p-4">
                    <form method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="title" class="form-label fw-bold">
                                    <i class="fas fa-tag text-primary"></i> Título del Producto
                                </label>
                                <input type="text" class="form-control" id="title" name="title" required 
                                       placeholder="Ingresa el nombre del producto">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="price" class="form-label fw-bold">
                                    <i class="fas fa-dollar-sign text-success"></i> Precio
                                </label>
                                <input type="number" step="0.01" class="form-control" id="price" name="price" required 
                                       placeholder="0.00">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label fw-bold">
                                    <i class="fas fa-list text-warning"></i> Categoría
                                </label>
                                <select class="form-select" id="category" name="category">
                                    <option value="1">Ropa</option>
                                    <option value="2">Electrónicos</option>
                                    <option value="3">Muebles</option>
                                    <option value="4">Zapatos</option>
                                    <option value="5">Otros</option>
                                </select>
                            </div>
                            
                            <div class="col-md-12 mb-3">
                                <label for="description" class="form-label fw-bold">
                                    <i class="fas fa-align-left text-info"></i> Descripción
                                </label>
                                <textarea class="form-control" id="description" name="description" rows="4" required 
                                          placeholder="Describe el producto detalladamente..."></textarea>
                            </div>
                            
                            <div class="col-md-12 mb-3">
                                <label for="image" class="form-label fw-bold">
                                    <i class="fas fa-image text-danger"></i> URL de la Imagen
                                </label>
                                <input type="url" class="form-control" id="image" name="image" 
                                       placeholder="https://ejemplo.com/imagen.jpg"
                                       value="https://via.placeholder.com/300x300?text=Producto">
                            </div>
                        </div>
                        
                        <div class="d-flex gap-3 justify-content-center mt-4">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="fas fa-save"></i> Crear Producto
                            </button>
                            <a href="{% url 'product_list' %}" class="btn btn-secondary btn-lg">
                                <i class="fas fa-arrow-left"></i> Volver
                            </a>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Vista previa de la imagen -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5><i class="fas fa-eye"></i> Vista Previa de la Imagen</h5>
                </div>
                <div class="card-body text-center">
                    <img id="imagePreview" src="https://via.placeholder.com/300x300?text=Producto" 
                         alt="Vista previa" class="img-fluid rounded" style="max-height: 300px;">
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Vista previa de la imagen
    document.getElementById('image').addEventListener('input', function(e) {
        const imageUrl = e.target.value;
        const preview = document.getElementById('imagePreview');
        
        if (imageUrl) {
            preview.src = imageUrl;
            preview.onerror = function() {
                this.src = 'https://via.placeholder.com/300x300?text=Imagen+No+Disponible';
            };
        } else {
            preview.src = 'https://via.placeholder.com/300x300?text=Producto';
        }
    });
</script>
{% endblock %}